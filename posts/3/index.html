
<!DOCTYPE HTML>

<html>

<head>
	<meta charset="utf-8">
	<title>P3 Programmer</title>
	<meta name="author" content="Tamizhvendan S">

	
	<meta name="description" content="Aug 17th, 2011 asp.net mvc, entity framework, unit testing Comments Test Driving Model Validation in ASP.NET MVC3 - Part 2 In Part-1of this small &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="http://feeds.feedburner.com/tamizhvendan-blog" rel="alternate" title="P3 Programmer" type="application/atom+xml">
	
	<link rel="canonical" href="http://www.p3programmer.com/posts/3/">
  <link rel="dns-prefetch" href="//fonts.googleapis.com">
	<link href="/blog/favicon.png" rel="shortcut icon">
	<link href="/blog/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<link href="/blog/stylesheets/font-awesome.min.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<link href='http://fonts.googleapis.com/css?family=Nunito:400,300,700' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	
  
	<script type="text/javascript">
		var _gaq = _gaq || [];
		_gaq.push(['_setAccount', 'UA-43004255-1']);
		_gaq.push(['_trackPageview']);

		(function() {
			var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		})();
	</script>


</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">
	
	<script src="/blog/javascripts/md5.js"></script>
	<script type="text/javascript">
		$(function(){
			$('.profilepic').append("<img src='http://www.gravatar.com/avatar/" + MD5("tamizh88@gmail.com") + "?s=160' alt='Profile Picture' style='width: 160px;' />");
		});
	</script>
	
</div>

<nav id="main-nav"><ul class="main">
    <li><a href="/blog/">Blog</a></li>
    <li><a href="http://about.me/tamizhvendan">About</a></li>
    <li><a href="/blog/blog/archives">Archives</a></li>
    <li><a href="/blog/open-source-contributions">Contributions</a></li>
</ul>
<a href="http://www.codeproject.com" rel="tag" style="display:none">CodeProject</a>
</nav>
<nav id="sub-nav">
	<div class="social">
		
			<a class="email" href="mailto:tamizh88@gmail.com" title="Email">Email</a>
		
		
		
		
			<a class="twitter" href="http://twitter.com/tamizhvendan" title="Twitter">Twitter</a>
		
		
			<a class="github" href="https://github.com/tamizhvendan" title="GitHub">GitHub</a>
		
		
			<a class="coderwall" href="https://coderwall.com/tamizhvendan" title="Coderwall">Coderwall</a>
		
		
		
		
		
		
		
		
		
    	
    	
			<a class="rss" href="http://feeds.feedburner.com/tamizhvendan-blog" title="RSS">RSS</a>
		
	</div>
<nav id="tag-cloud">
	<section>
    <span id="tag-cloud"><a href='/blogblog/categories/asp-dot-net' style='font-size: 104.0%'>asp.net</a> <a href='/blogblog/categories/asp-dot-net-mvc' style='font-size: 160.0%'>asp.net mvc</a> <a href='/blogblog/categories/asp-dot-net-identity' style='font-size: 104.0%'>asp.net-identity</a> <a href='/blogblog/categories/c-number' style='font-size: 116.0%'>c#</a> <a href='/blogblog/categories/craftsmanship' style='font-size: 116.0%'>craftsmanship</a> <a href='/blogblog/categories/data-access' style='font-size: 112.0%'>data access</a> <a href='/blogblog/categories/devops' style='font-size: 104.0%'>devops</a> <a href='/blogblog/categories/dsl' style='font-size: 104.0%'>dsl</a> <a href='/blogblog/categories/entity-framework' style='font-size: 120.0%'>entity framework</a> <a href='/blogblog/categories/fake' style='font-size: 104.0%'>fake</a> <a href='/blogblog/categories/fparsec' style='font-size: 104.0%'>fparsec</a> <a href='/blogblog/categories/fsharp' style='font-size: 136.0%'>fsharp</a> <a href='/blogblog/categories/functional-programming' style='font-size: 124.0%'>functional-programming</a> <a href='/blogblog/categories/goals' style='font-size: 104.0%'>goals</a> <a href='/blogblog/categories/javascript' style='font-size: 112.0%'>javascript</a> <a href='/blogblog/categories/jquery' style='font-size: 108.0%'>jquery</a> <a href='/blogblog/categories/node-dot-js' style='font-size: 108.0%'>node.js</a> <a href='/blogblog/categories/others' style='font-size: 104.0%'>others</a> <a href='/blogblog/categories/owin' style='font-size: 104.0%'>owin</a> <a href='/blogblog/categories/programming' style='font-size: 124.0%'>programming</a> <a href='/blogblog/categories/rx' style='font-size: 104.0%'>rx</a> <a href='/blogblog/categories/signalr' style='font-size: 104.0%'>signalr</a> <a href='/blogblog/categories/unit-testing' style='font-size: 120.0%'>unit testing</a> <a href='/blogblog/categories/web-api' style='font-size: 108.0%'>web-api</a> </span>
</section>
</nav>
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner">
<div itemscope itemtype="http://schema.org/Blog">


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2011-08-17T00:00:00+05:30" data-updated="true" itemprop="datePublished">Aug 17<sup>th</sup>, 2011</time></div>
		<div class="tags">


	<a class='category' href='/blog/blog/categories/asp-dot-net-mvc/'>asp.net mvc</a>, <a class='category' href='/blog/blog/categories/entity-framework/'>entity framework</a>, <a class='category' href='/blog/blog/categories/unit-testing/'>unit testing</a>


</div>
		
			<span class="comments"><a href="/blog/2011/08/17/test-driving-model-validation-in-aspnet_17/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2011/08/17/test-driving-model-validation-in-aspnet_17/" itemprop="url">Test Driving Model Validation in ASP.NET MVC3 - Part 2</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<div class='post'>
    <p>
    <p>
        In <a href="/blog/2011/08/13/test-driving-model-validation-in-aspnet/">Part-1</a>of this small blog post series, 
            we have explored a way to do the TDD of controller’s responsibility in the context of model validation. 
            In this Part-2 we are going to see <strong>“How to do the TDD of Model Validation”</strong>
    </p>

    <p>
        Before getting into the business let us have a quick look at how ASP.NET MVC3 does the model validation. 
            Internally when making an Http POST/GET request, MVC3 makes use of a helper class 
            <strong><a href="http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.validator.aspx">Validator</a></strong>
        located in the namespace <em>System.ComponentModel.DataAnnotations.</em>
        Validator can be used to validate the models based on the <strong>
            <a href="http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.validationattribute.aspx">ValidationAttribute</a></strong>
        attributes associate with the model. After validating MVC3 adds the validation results to the controller’s <em>ModelState</em>
        Property by the <em>AddModelError</em> method which in turn sets the<em> ModelState.IsValid</em> property 
            (Refer <a href="/blog/2011/08/13/test-driving-model-validation-in-aspnet/">Part-1</a>). We are actually going to make use of this <em>Validator</em>
        helper class going to test drive the model validation. 
    </p>

    <h4>Let us start with a small requirement</h4>
    <p>
        <em>“Employee name should not be empty”</em>
    </p>

    <p>The corresponding unit test will be like as follows</p>

    <div style="clear: both; text-align: center;">
        <img src="http://4.bp.blogspot.com/-3Ql_dP2wJkE/Tku0g78apHI/AAAAAAAAAKw/gV-lTvda50I/s1600/UnitTest1.PNG" />
    </div>

    <p>ValidateObject Method determines whether the specified object is valid using the validation context and throws a ValidationException if the object is invalid.</p>


    <p>Employee Model will be like as follows</p>

    <div style="clear: both; text-align: center;">
            <img src="http://4.bp.blogspot.com/-URfST5ZPMwo/Tku0gsJJAxI/AAAAAAAAAKs/5K0GYH1ObLs/s1600/Emp1.PNG" />
    </div>

    <p>
        When you run the test “EmployeeNameShouldNotBeEmpty”, it will <strong><span style="color: red;">Fail</span></strong> with the error message 
        <em>“System.ComponentModel.DataAnnotations.ValidationException was expected”</em>. Now it’s time to make it <strong>
            <span style="color: #00b050;">Pass. </span></strong>Thanks to <em>RequiredAttribute</em> we can make the test the pass without much effort. 
        Just decorate the Name property with the <em>[Required]</em> Attribute. That’s it. Now run the test and it will 
        <strong><span style="color: #00b050;">Pass.</span></strong> As there is no scope for Refactoring, we will be ignoring it.
    </p>

    <p>Well, we have done the TDD of model validation. Now let’s move onto the next requirement.</p>
    <p>
        <em>“Employee age should be greater than 30”</em>
    </p>
    <br />
    <p>
        Let’s write the unit test for this requirement.
    </p>

    <div style="clear: both; text-align: center;">
        <img src="http://3.bp.blogspot.com/-cXpXTstCDr4/Tku0hg4cWDI/AAAAAAAAAK0/hahJBKoWOLI/s1600/UnitTest2.PNG" />
    </div>

    <p>When we run the test, we’d get a failing test with error message “System.ComponentModel.DataAnnotations.ValidationException was expected”</p>

    <p>Like <em>RequiredAttribute</em> we don’t have any AgeLimit Attribute to make the test pass. However we can create such kind of CustomAttributes. 
        Another approach would be making use of <a href="http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.ivalidatableobject.aspx">
            <em>IValiadatableObject</em></a></p>

    <p>I will be using the latter option in this blog post, if you are interested in creating custom attribute refer this <a href="http://www.devtrends.co.uk/blog/the-complete-guide-to-validation-in-asp.net-mvc-3-part-2">blog post</a></p>

    <p>Here we go; the modified Employee model will look like as follows </p>

    <div style="clear: both; text-align: center;">
            <img src="http://1.bp.blogspot.com/-zAsuau_JXwA/Tku0iUzEgFI/AAAAAAAAAK4/J1t3gYaECmw/s1600/Emp2.PNG" />
    </div>

    <p>
        The <em>Validator</em> helper class will invoke the Validate method of the model if the model passed to the <em>ValidateObject</em> 
        Method implements the <em>IValidatableObject</em>.
    </p>

    <p>Hurrah! Now you will be getting a passing test. We have done the TDD of Model Validation. </p>
    <h3>Summary</h3>
    <p>The bottom-line is we should not combine the unit tests of model validation with the controller’s unit tests and both should be kept separate. 
        You can download the source code which we’ve seen in this blog post series from <a href="http://www.box.net/shared/73e9m5d2ufyi6pazfq4j">here</a></p>
</div>
		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2011-08-13T00:00:00+05:30" data-updated="true" itemprop="datePublished">Aug 13<sup>th</sup>, 2011</time></div>
		<div class="tags">


	<a class='category' href='/blog/blog/categories/asp-dot-net-mvc/'>asp.net mvc</a>, <a class='category' href='/blog/blog/categories/entity-framework/'>entity framework</a>, <a class='category' href='/blog/blog/categories/unit-testing/'>unit testing</a>


</div>
		
			<span class="comments"><a href="/blog/2011/08/13/test-driving-model-validation-in-aspnet/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2011/08/13/test-driving-model-validation-in-aspnet/" itemprop="url">Test Driving Model Validation in ASP.NET MVC3 - Part 1</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<div class='post'>
    <div>
        <p>
            Entity Framework 4.1(EF4.1) provides in-built support for defining the validation
             constraints in model through Data Annotation attributes and Fluent API. It’s
             one of the cool features provided by EF4.1 that enables the developers to define
             validation rules of the model in an easy and more maintainable way. In addition
             to that MVC3 framework makes use of these validation model and supports both
             client and server side validation without writing any code!
        </p>

        <p>
            I’m in the early days of practicing Test Driven Development (TDD). Fortunately I
             have got an opportunity to implement TDD in my current assignment. I feel I am
             much oriented and focused towards the solution while using TDD. Also it makes
             me to critique my design and the way I do the coding. I would like to be a
             better programmer and looking forward to improve myself and hence TDD suits me
             more. Learning TDD and practicing it is totally different! Yes, in theory it
             is very easy to read and understand TDD. But when you practice it, you will
             encounter many more interesting things about TDD and in fact it’s where you can
             actually learn TDD.
        </p>

        <p>
            Okay, how to do TDD with Controller&#8217;s responsibility in the context of Model validation in MVC3. Well, it is easy but
                we should understand and find out what exactly we want to test and the way to test them. Many articles and blog posts suggest doing it through the controller.
                Is it really a good approach to test the model validation through controller?&nbsp;&nbsp; Kindly think of it for a moment. 
                I feel it is not a right way to deal this stuff.&nbsp;
        </p>

        <p>
            Let me explain it through a small example. Consider an Employee model which has two properties Name and Age&nbsp;and an EmployeeController responsible for doing
            CRUD on Employee Model. What is the responsibility of EmployeeController when creating a new Employee data? It should check whether the posted employee model is 
            valid or not, if it is valid add to the database else return the view with the validation errors. MVC3 framework makes life easy by automatically validating the 
            Posted model and set the <b>IsValid</b> Property of the ModelState and also add validation errors to the model. Hence controller&#8217;s job is very easy as follows
        </p>
        <div style="clear: both; text-align: center;">
            <br />
            <img border="0" src="http://2.bp.blogspot.com/-gMWdWyjaBxQ/TkYnWEIpWQI/AAAAAAAAAKI/mvc7iTeatok/s1600/Employee.png" />
        </div>

        <div style="clear: both; text-align: center;">
            <br />
            <img src="http://1.bp.blogspot.com/-DSw1qdzt9ZA/TkYYuJLxKGI/AAAAAAAAAJw/5k1AerK1wiE/s1600/EmpControllerResponsibility.png" />
        </div>
        <h4>Corresponding TestCases</h4>

        <ul>
            <li>When creating a new employee, if the passed employee data is valid, it should be added to the database</li>
            <li>When creating a new employee, if the passed employee data is InValid, it should not add to the database and show the view with validation errors.</li>
        </ul>
        <br />
        <p>The first unit test will be as following:</p>

        <<div style="clear: both; text-align: center;">
            <img src="http://3.bp.blogspot.com/-XEBOUhl7_WM/TkYgBqYX9VI/AAAAAAAAAJ0/wqKLvm_NGnw/s1600/EmpControllerUnitTest1.png" />
        </div>

        <p>
            This unit test makes use of the following fake Database implementation.
        </p>

        <div style="clear: both; text-align: center;">
            <img src="http://4.bp.blogspot.com/-c1GRZq3f1Ms/TkYiTwN9z4I/AAAAAAAAAJ4/lma-KtsMK6Q/s1600/fakeDatabase.png" />
        </div>
        <p>
            To keep this blog post simple, I am not showcasing the TDD steps which I have done here and the EmployeeController Code would be as follows.
        </p>
        
        <div style="clear: both; text-align: center;">
                <img src="http://1.bp.blogspot.com/-QRcFWLWNsmg/TkYkHGAoWnI/AAAAAAAAAJ8/FEit5wZZWs0/s1600/EmpController.png" />
        </div>
        
        <p>
            Employee Controller makes use of an InMemory Database (Simplest option!!) &nbsp;which implements the IRepository interface.&nbsp;
        </p>
        
        <div style="clear: both; text-align: center;">
                <img border="0" src="http://1.bp.blogspot.com/-xy_kB-hQk9o/TkYlRVdooZI/AAAAAAAAAKA/nnxYCWTdTLg/s1600/IRepository.png" />
        </div>

        <div style="clear: both; text-align: center;">
                <img border="0" src="http://2.bp.blogspot.com/-yU6djR74NeA/TkYlXKnjBOI/AAAAAAAAAKE/eXcZL2_7qew/s1600/InMemoryDb.png" />
        </div>
        
        <p>
            I have done all the wire ups to make the first unit test pass. (Pardon me! For the sake of simplicity of this blog post I&#8217;ve violated TDD rules. 
            Hope you can infer the TDD steps from the coding samples). Its time to &nbsp;move to the next unit test and here comes a bottleneck. &nbsp; &nbsp;
        </p>

        <p>
            You may wonder what it is that. There comes a feature of ASP.NET MVC 3 framework. During HTTP post action the framework validates the employee model 
            and sets the EmployeeController&#8217;s Property <em>ModelState.IsValid</em> to true or false. <b>It occurs only during HTTP post. </b>
            In our unit test code we are actually calling the action methods of the controller and not making any HTTP post. 
            So, the ModalState is always true whenever we call the action methods of a controller from a unit testing code.&nbsp;
        </p>

        <p>
            In our second test case, we need to setup a controller in such a way that its ModelState property is InValid. 
            We can do this by adding a ModelError to the ModelState property of the EmployeeController. In fact it is what MVC3 framework is doing under the 
            hood when making HTTP post.&nbsp;
        </p>

        <div style="clear: both; text-align: center;">
                <img src="http://4.bp.blogspot.com/-iVcBB1yZRLI/TkYrDW5JloI/AAAAAAAAAKM/li_PACoQS1E/s1600/EmpControllerUnitTest2.png" />
        </div>
        
        <p>
            Now we Test drived the controller&#8217;s responsibility in the context of model validation. 
            In my <a href="/blog/2011/08/17/test-driving-model-validation-in-aspnet_17/">next blog post</a> &nbsp;
            I&#8217;d showcase how to test drive the model validation itself.
        </p>

    </div>
</div>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2011-08-04T00:00:00+05:30" data-updated="true" itemprop="datePublished">Aug 4<sup>th</sup>, 2011</time></div>
		<div class="tags">


	<a class='category' href='/blog/blog/categories/data-access/'>data access</a>, <a class='category' href='/blog/blog/categories/entity-framework/'>entity framework</a>


</div>
		
			<span class="comments"><a href="/blog/2011/08/04/ef-code-first-41-in-console-application/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2011/08/04/ef-code-first-41-in-console-application/" itemprop="url">EF Code First 4.1 in Console Application</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<div class='post'>
	<div>
		<p>
			Whenever I learn any new things in .Net or experimenting with something, I always prefer to use <em>Console Applications.</em>
			I personally feel it helps me to concentrate more on what actually I am trying to learn or experiment without any sort of distractions. 
			Moreover it keeps things simple.
		</p>

		<p>
			I would like to do the same while learning EF Code First 4.1. 
			Though most of articles in web explain EF with respect to ASP.NET MVC, 
			I favor learning it through my own way using console application without creating any controllers and views!!
		</p>

		<h4>Following are the prerequisites to work with EF Code First 4.1</h4>
		<ul>
			<li>
				<a href="http://weblogs.asp.net/scottgu/archive/2011/03/15/visual-studio-2010-sp1.aspx">Visual Studio 2010 SP1</a>
			</li>
			<li>
				<a href="http://blogs.msdn.com/b/adonet/archive/2011/04/11/ef-4-1-released.aspx">Entity Framework 4.1</a>
			</li>
			<li>
				<a href="http://weblogs.asp.net/scottgu/archive/2011/01/11/vs-2010-sp1-and-sql-ce.aspx">SQL CE</a> or 
				SQL Express (SQL CE would be an ideal option for learning purpose)
			</li>

		</ul>

		<h4>Show me the Code!</h4>
		<p>After creating a console application project, the initial step would be adding references to the following assemblies.</p>
		<ul>
			<li>EntityFramework (Version 4.1)</li>
			<li>System.Data.Entity</li>
			<li>System.ComponentModel.DataAnnotations</li>
		</ul>		

		<p>Now it’s time to defining the model and the data context. To keep it simple, I am going to define only one model “User”.</p>
		<div style="clear: both; text-align: center">
            <br />
			<img src="http://4.bp.blogspot.com/-FxoouXlWKxw/TjqAva1qsWI/AAAAAAAAAJM/5PLCVnNFhDQ/s1600/User.PNG" alt="" />
		</div>

		<p>The data context would be as following.</p>
		<div style="clear: both; text-align: center">
            <br />
			<img src="http://3.bp.blogspot.com/-2pLPCQePVKY/TjqAwJ-QD4I/AAAAAAAAAJU/X66hDdCw6eo/s1600/MyDataContext.PNG" alt="" />
		</div>

		<p>
			This basic infrastructure is sufficient to run the console application. However as we are using the data context for learning purpose, 
			we might change the model often and doing so will make it inconsistent with the database created automatically when you run the application for the first time.
		</p>

		<p>
			We can circumvent this situation by creating new Data Context initialize class that inherits from <em>DropCreateDatabaseIfModelChanges</em>
			&lt;TContext&gt; where TContext is the data context that you want to sync with the database always. 
			This class also offers an override function <em>“Seed”</em> using which we can fill the database with some initial data.
		</p>

		<p>The finished code of DataContext initialize class will be like the following.</p>
		<div style="clear: both; text-align: center">
            <br />
			<img src="http://2.bp.blogspot.com/-fFqQJzPBGkY/TjqAwOW4nMI/AAAAAAAAAJY/DDY_VyYQHfI/s1600/MyDataContextInit.PNG" alt="" />
		</div>

		<p>
			This datacontext initialize class would create the database whenever the database model changes and create two users by default. 
			Now it’s time to code our Main method.
		</p>
		<p>
			Here we go. Pay close attention to the first statement in the Main method that initializes the database with an instance of DataContextInit 
			class that we have created.
		</p>
		<div style="clear: both; text-align: center">
            <br />
			<img src="http://4.bp.blogspot.com/-jl5r5Sk7m0Q/TjqAvdAJRPI/AAAAAAAAAJQ/elZcjzTNgEE/s1600/EFConsoleApp.PNG" alt="" />
		</div>


		<p>
			Now you can run the application without any configurations. The default behavior of EF Code First will create the database 
			with the same name as your data context name here “MyDataContext” in the SQL Express server installed in the local machine. 
			If you wish to change this default behavior and wanted to use SQL CE instead of SQL Express just add an App.Config to 
			the project and create a connection string with the name of your data context as follows.
		</p>

		<div style="clear: both; text-align: center">
            <br />
			<img src="http://4.bp.blogspot.com/-YUZyAGX2KyA/TjqAvBuEd4I/AAAAAAAAAJI/p_UjE-K_lR8/s1600/Configuration.PNG" alt="" />
		</div>



		<p>That’s it. “Ctrl+F5” and here is the output</p>
		<div style="clear: both; text-align: center">
            <br />
			<img src="http://3.bp.blogspot.com/-l0IfgWCGZfQ/TjqAwX_8pnI/AAAAAAAAAJc/RLcjASqgaBo/s1600/Output.PNG" alt="" />
		</div>


		<h4>Summary</h4>
		<p>
			In this blog post we have explore the basic foundation on how to work with EF CodeFirst using console application. 
			If you want to get your dirty with EF Code First without any distraction Console Application is a better one. 
			You can download the sample code used in this blog post from <a href="http://www.box.net/shared/s0yu8b4sebp3dh9ru5gb">here.</a>
	</div>
</div>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2011-08-03T00:00:00+05:30" data-updated="true" itemprop="datePublished">Aug 3<sup>rd</sup>, 2011</time></div>
		<div class="tags">


	<a class='category' href='/blog/blog/categories/asp-dot-net-mvc/'>asp.net mvc</a>


</div>
		
			<span class="comments"><a href="/blog/2011/08/03/using-ajaxbeginform-aspnet-mvc3-ajax/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2011/08/03/using-ajaxbeginform-aspnet-mvc3-ajax/" itemprop="url">Using Ajax.BeginForm – ASP.NET MVC3 Ajax – Part III</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<div class='post'>

    <p>
        In my previous blog posts 
	    <a href="/blog/2011/06/24/aspnet-mvc-3-ajax-part-i/">Part 1</a>, 
	    <a href="/blog/2011/06/26/ajax-mvc3-ajax-part-ii-adding-animation/">Part 2</a>
        we have explored how to use the <em>Ajax.ActionLink()</em> helper method to implement a basic Ajax request. 
	    In this blog post we have are going to see an another useful helper method <em>Ajax.BeginForm()</em>
    </p>

    <p>
        We will be implementing the following scenario using the <em>Ajax.BeginForm()</em>. 
    The scenario would be having a view consisting of a simple form with name and email field.
    </p>
    <div style="clear: both; text-align: center">
        <img src="http://3.bp.blogspot.com/-ymtu1zLXx3A/TjkOu1RpS_I/AAAAAAAAAIs/dbURJFeRGeA/s1600/AjaxBeginForm1.PNG" />
    </div>

    <p>Upon clicking the “Submit” button, the data will be sent back to the server via Ajax Post request and get a confirmation like this.</p>
    <div style="clear: both; text-align: center">
        <img src="http://4.bp.blogspot.com/-SvRqB-F2Yu4/TjkOuy-BpiI/AAAAAAAAAIw/er75G6DKkcU/s1600/AjaxBeginForm2.PNG" />
    </div>

    <p>
        ASP.NET MVC3 offers an intuitive way to submitting/posting the form data to server via ajax using 
        <a href="http://msdn.microsoft.com/en-us/library/system.web.mvc.ajax.ajaxextensions.beginform.aspx"><em>Ajax.BeginForm</em></a> helper method. 
        Lets start developing the scenario by first defining the Model (Not using TDD to keep this blog post simple).
    </p>

    <div><script src='https://gist.github.com/546d5c4d9476826dfe14.js?file=PersonalDetail.cs'></script>
<noscript><pre><code>using System.ComponentModel.DataAnnotations;
namespace UsingAjaxForms.Models
{
    public class PersonalDetail
    {
        [Required]
        public string Name { get; set; }

        [Required]
        public string Email { get; set; }
    }
}</code></pre></noscript></div>


    <p>
        To keep things simple, Our PersonalDetailsController will be having only two action methods. 
        One will handling the “Get” request for Creating PersonalDetail and the other one for handling “Post” request for Creating PersonalDetail.
    </p>

    <div><script src='https://gist.github.com/546d5c4d9476826dfe14.js?file=PersonalDetailController.cs'></script>
<noscript><pre><code>using System.Web.Mvc;
using UsingAjaxForms.Models;
namespace UsingAjaxForms.Controllers
{
    public class PersonalDetailController : Controller
    {
        public ActionResult Create()
        {
            var personalDetail = new PersonalDetail();
            return View(personalDetail);
        }

        [HttpPost]
        public string Create(PersonalDetail personalDetails)
        {
            return &quot;Hi &quot; + personalDetails.Name + &quot;!. Thanks for providing the details.&quot;;
        }
    }
}</code></pre></noscript></div>


	<p>
        Now, the stage is set to play using ajax. The View for Creating new PersonalDetail using Ajax is similar to that of using ordinary post back except one factor. 
        We need to replace the Html.BeginForm helper method with the 
        <a href="http://msdn.microsoft.com/en-us/library/system.web.mvc.ajax.ajaxextensions.beginform.aspx"><em>Ajax.BeginForm</em></a>
    </p>

    <p>
        Ajax.BeginForm method has 11 overloads. On this blog post we are going to use the following overload. 
        <em>Ajax.BeginForm(string actionName, string controllerName, AjaxOptions ajaxOptions)</em>
    </p>

    <p>
        The actionName and controllerName points to the handler which is going to handle the ajax request and the ajaxOptions defines the behavior of the ajax request. 
        The View for Creating PersonalDetail will look like this
    </p>

    <div style="clear: both; text-align: center">
        <img src="http://2.bp.blogspot.com/-MbuiTU8NMKU/TjkOurokTOI/AAAAAAAAAIo/9FvQ9vtIDzw/s1600/AjaxBeginFormView.PNG" />
    </div>

    <p>That’s it!! All you need to do is to enclose your form into an Ajax.BeginForm method wired with the necessary configurations. 
        In this example the ajax form method takes care of wiring up submit form action to the given action method of the controller and 
        update the result which it receives from the server using the <em>UpdateTargetId</em>. 
        You can also play with the Ajax request by adding a loading animation as I have mentioned in 
        <a href="/blog/2011/06/26/ajax-mvc3-ajax-part-ii-adding-animation/">Part II blog post</a>. 
        <strong>Note:</strong> Dont forget to add references to the jQuery script files</p>

    <h4>Summary:</h4>
    <p>In this blog post we have seen a very basic way to create Ajax forms in ASP.NET MVC3. 
        You can download the source code of this blog post from <a href="http://www.box.net/shared/kvktovzz5fiihtxemvr0">here</a></p>
</div>
	
		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2011-07-27T00:00:00+05:30" data-updated="true" itemprop="datePublished">Jul 27<sup>th</sup>, 2011</time></div>
		<div class="tags">


	<a class='category' href='/blog/blog/categories/craftsmanship/'>craftsmanship</a>


</div>
		
			<span class="comments"><a href="/blog/2011/07/27/journey-towards-software-craftsmanship/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2011/07/27/journey-towards-software-craftsmanship/" itemprop="url">A Journey Towards Software Craftsmanship</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<div class='post'>
    <div>
        <p>Programming has been my passion right from the day I have seen computer. After nearly 3.7 years of experience (2 years of freelancing and 1.7 years of Industry), I found that there are lot of areas in programming where I need to improve myself especially in the art of software craftsmanship. Programming is really an art!!</p>
        <p>Fine, I have the passion and wish to move to the next level but the key is get started and focusing my efforts on a right path. After some extensive internet searches and fruitful discussions with my colleagues, I have drawn a road map. I feel it is worth sharing through this blog as it might help someone who aspires to reach the next level in programming. </p>
        <p>We can’t become Einstein in single night. We can’t become Sachin just by scoring a match winning century in a single match either. Likewise we can’t become a Master in Software Craftsmanship by just creating a single Killer Application. It takes a lot of efforts, passion, endurance persistence, temperament and a well-defined path to reach the top. </p>
        <p>As a programmer/developer we all know very well about the benefits of Code Reuse. Have you ever thought of <i>Experience Reuse!! </i>Just think about it for some minutes. Obviously there is no replacement/substitute for Experience but what’s wrong in learning from others experience. It requires both hard work and smart work to make it to the next level. Here I am mentioning about smart work. Why are we doing the same mistakes which some people did already in their lives? <span style="mso-spacerun: yes;">&nbsp;</span>Why don’t we just learn it from them and get rid of those recurring mistakes. Come on, we are programmers, be smarter. Let’s learn from the some of the masters in the field and do some new mistakes.</p>
        <p>Before start mentioning about those masters, I would like to thank my colleague “Jijesh Mohan” who has helped a lot and inspired me to start the journey (Now I hope, you will know what is mean by Experience Reuse). Here is the list of Masters.</p>
    </div>
    <ul>
        <li><a href="http://blog.objectmentor.com/">Robert C Martin</a></li>
        <li><a href="http://pragdave.pragprog.com/">Dave Thomas</a></li>
        <li><a href="http://martinfowler.com/">Martin Fowler</a></li>
        <li><a href="http://en.wikipedia.org/wiki/Ward_Cunningham">Ward Cunningham</a></li>
        <li><a href="http://en.wikipedia.org/wiki/Kent_Beck">Kent Beck</a></li>
        <li><a href="http://en.wikipedia.org/wiki/Grady_Booch">Grady Booch</a></li>
        <li><a href="http://www.joelonsoftware.com/">Joel Spolsky</a></li>
        <li><a href="http://www.catb.org/~esr/">Eric S Raymond</a></li>
    </ul>
    <p>One great thing about all these excellent folks is they share their knowledge, either through Books or through their blogs. We are very fortunate. Now it’s our turn to learn from their wisdom and move forward.</p>
    <blockquote><p>The man who does not read good books has no advantage over the man who can&#8217;t read them.</p><footer><strong>Mark Twain</strong></footer></blockquote><div>I have found the following magnificent books in the quest</div>
    <ul>
        <li>Pragmatic Programmer – Andrew Hunt, Dave Thomas</li>
        <ul>
            <li>Must Read for every programmer. In my perspective it is the Bible of Programming</li>
        </ul>
        <li>Clean Code – Robert C Martin</li>
        <li>Refactoring – Martin Fowler</li>
        <li>Art of Unix Programming – Eric S Raymond</li>
    </ul>
    <p>I’ve read the Pragmatic Programmer and all others are in my “To-Read” list. I am really searching for words in dictionary to describe about “Pragmatic Programmer”. It is a “Gem”.</p>
    <p>When it comes to blogs, we have “Google Reader”. Just subscribe to the blog posts of these eminent people through Google Reader and learn the art of programming.</p>
    <p>The stage has been setup. No one can ride bicycle by reading a book on “How to Ride Bicycle”. What books and blog posts would offer us is knowledge. In addition to knowledge to move further we need another thing called “Practice”. Yes get your hands dirty. Experiment, Research, Critique, Analyse, involve in healthy debates with your colleagues on various aspects of software craftsmanship, work and feel passionate about your work.</p>
    <p>I have pledged myself to follow the best practices in all my development works and no compromise on the quality of the code I write. In nutshell, I am going to care about my craft, think about my work and strive for excellence.</p>
    <p>I am in the very early stage of becoming a better programmer and looking forward to listen to your suggestions and inputs on this. When we grow older, we will be stronger. With all blessings and hope, the journey begins!</p>
</div>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2011-07-13T00:00:00+05:30" data-updated="true" itemprop="datePublished">Jul 13<sup>th</sup>, 2011</time></div>
		<div class="tags">


	<a class='category' href='/blog/blog/categories/c-number/'>c#</a>, <a class='category' href='/blog/blog/categories/programming/'>programming</a>


</div>
		
			<span class="comments"><a href="/blog/2011/07/13/observer-pattern-using-delegates-vs/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2011/07/13/observer-pattern-using-delegates-vs/" itemprop="url">Observer Pattern Using Delegates v/s Observer Pattern Using Events and Delegates</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<div class='post'>
	<p>
		Most of the articles and texts in C# demonstrate the observer pattern using events and delegates. When going through one such text, a thought come across my mind. Why we are going for events when we can easily achieve the multicasting using Delegates alone. After some R&amp;D, I found it out why and hence this blog post.
	</p>
	<p>I am going to explain this “why” using a Weather Station example. To keep things simple, the Weather Station that we are going to see will keep track of only the temperature. Whenever the temperature changes, it simplify notifies its subscribers with the new temperature. Flash News is one of the subscribers which show the temperature in flash news. News Feed, another subscriber which adds the temperature information to the news feed. Fine, enough theory! It’s time to see the code.</p>
	<p>Here is the implementation of Observer Pattern using Delegates alone. </p>
	<div><script src='https://gist.github.com/fb9f64cd49646ddf8eba.js?file=PubSub.cs'></script>
<noscript><pre><code>namespace DelegatesAndEvents
{
    class WeatherStation
    {
        private int _temperature;
        public TemperatureReporter Reporter { get; set; }

        public int Temperature
        {
            get { return _temperature; }
            set
            {
                if (Reporter != null)
                {
                    Reporter(value);
                }
                _tempearture = value;
            }
        }
    }

    class NewsFeed
    {
        WeatherStation weatherStation;

        public void AddTemperatureInfoToFeed(int temperature)
        {
            Console.WriteLine(&quot;News Feed: New temperature &quot; + temperature + &quot; added to feed.&quot;);
        }

        public NewsFeed(WeatherStation weatherStation)
        {
            this.weatherStation = weatherStation;
            weatherStation.Reporter += AddTemperatureInfoToFeed;
        }
    }

    class FlashNews
    {
        WeatherStation weatherStation;

        public void ShowTemperatureInfoInFlashNews(int temperature)
        {
            Console.WriteLine(&quot;Flash News: New temperature is &quot; + temperature + &quot;.&quot;);
        }

        public FlashNews(WeatherStation weatherStation)
        {
            this.weatherStation = weatherStation;
            weatherStation.Reporter += ShowTemperatureInfoInFlashNews;
        }
    }
}</code></pre></noscript></div>


	<h4>The Main Program</h4>

	<div><script src='https://gist.github.com/fb9f64cd49646ddf8eba.js?file=Program.cs'></script>
<noscript><pre><code>namespace DelegatesAndEvents
{
    public delegate void TemperatureReporter(int tempearture);

    class Program
    {
        static void Main(string[] args)
        {
            // Observer Pattern Using Delegates
            WeatherStation weatherStation = new WeatherStation();
            FlashNews flashNews = new FlashNews(weatherStation);
            NewsFeed newsFeed = new NewsFeed(weatherStation);
            weatherStation.Temperature = 30;
            weatherStation.Temperature = 15;
            weatherStation.Temperature = 45;
        }
    }
}</code></pre></noscript></div>

	<h4>The output</h4>
	<div style="clear: both; text-align: center;">
		<img src="http://1.bp.blogspot.com/-LjDx8rPsr50/Th0bSdtTyHI/AAAAAAAAAHk/dMBuF4GLgD0/s1600/delegates-output.PNG" /></div>
	<p>Hurrah! It’s working as expected. Both subscribers are get notified. We can implement the observer pattern using delegates alone. Stop for a minute and go through the code, is the implementation robust? Kudos if you are able to find the shortcomings of this implementation. If not continue reading. </p>
	<p>Think of a world where everyone is good. There is no need of police, no need of court either. But it is not the case. You may wonder why I am mentioning this here. This analogy holds true for the objective of this blog post too. There is no need of using events in the c# programming world if all the subscribers are good. Miserably, here also it is not the case. Hence we are going for events instead of using delegates alone. </p>
	<h4>Drawbacks of using delegates alone</h4>
	<ul>
		<li>A subscriber can replace other subscribers by reassigning the delegate</li>
		<li>A subscriber can clear all other subscribers also (by setting the delegate to null). </li>
		<li>A subscriber can broadcast to other subscribers by invoking the delegate</li>
	</ul>
	Clearly all the above 3 drawbacks violates the Observer Pattern.Here is our evil subscriber code implementation. 
<div><script src='https://gist.github.com/fb9f64cd49646ddf8eba.js?file=EvilSubscriber.cs'></script>
<noscript><pre><code>namespace DelegatesAndEvents
{
    class EvilSubscriber
    {
        WeatherStation weatherStation;

        public void EvilMessage(int temperature)
        {
            Console.WriteLine(&quot;The temperature is &quot; + (temperature * 100));
        }

        public EvilSubscriber(WeatherStation weatherStation)
        {
            this.weatherStation = weatherStation;

            // Broadcast to all the subscriber
            weatherStation.Reporter(60);

            // Reassign the subscriber            
            weatherStation.Reporter = EvilMessage;

            // Replace all the subscribers            
            weatherStation.Reporter = null;
        }
    }
}</code></pre></noscript></div>


	<p>Hope now you understand the need of a better implementation of observer pattern. Here comes the salvage. Event! Use event along with delegates. With event in place, compiler will not allow the evil subscriber to get compiled. </p>
	<h4>Robust implementation of Weather Station using events</h4>

	<div><script src='https://gist.github.com/fb9f64cd49646ddf8eba.js?file=PubSub2.cs'></script>
<noscript><pre><code>namespace DelegatesAndEvents
{ 
    class WeatherStation2 
    { 
        private int _tempearture; 
        
        public event TemperatureReporter Reporter; 
        
        public int Temperature 
        { 
            get 
            { 
                return _tempearture; 
            } 
            set 
            { 
                if (Reporter != null) 
                { 
                    Reporter(value); 
                } 
                _tempearture = value; 
            } 
        }
    } 
    
    class NewsFeed2 
    { 
        WeatherStation2 weatherStation; 
        
        public void AddTemperatureInfoToFeed(int temperature) 
        { 
            Console.WriteLine(&quot;News Feed2: New temperature &quot; + temperature + &quot; added to feed.&quot;); 
        } 
        
        public NewsFeed2(WeatherStation2 weatherStation) 
        { 
            this.weatherStation = weatherStation; 
            weatherStation.Reporter += AddTemperatureInfoToFeed; 
        } 
    } 
    
    class FlashNews2 
    { 
        
        WeatherStation2 weatherStation; 
        
        public void ShowTemperatureInfoInFlashNews(int temperature) 
        { 
            Console.WriteLine(&quot;Flash News2: New temperature is &quot; + temperature + &quot;.&quot;); 
        } 
        
        public FlashNews2(WeatherStation2 weatherStation) 
        { 
            this.weatherStation = weatherStation; weatherStation.Reporter += ShowTemperatureInfoInFlashNews; 
        } 
    } 
}    			</code></pre></noscript></div>


	<p>The unfortunate evil subscriber no longer compiles with events!</p>
	<div><script src='https://gist.github.com/fb9f64cd49646ddf8eba.js?file=EvilSubscriber2.cs'></script>
<noscript><pre><code>class EvilSubscriber2
{
    WeatherStation2 weatherStation;

    public void EvilMessage(int temperature)
    {
        Console.WriteLine(&quot;The temperature is &quot; + (temperature * 100));
    }

    public EvilSubscriber2(WeatherStation2 weatherStation)
    {
        this.weatherStation = weatherStation;

        // Broadcast to all the subscriber         
        weatherStation.Reporter(60); // Compiler Error                

        // Reassign the subscriber                
        weatherStation.Reporter = EvilMessage; // Compiler Error  

        // Replace all the subscribers                 
        weatherStation.Reporter = null; // Compiler Error    
    }
}</code></pre></noscript></div>

	<br />
	You&nbsp;can download the source code from <a href="http://www.box.net/shared/kunno1y9noj26qodstnz">here</a>
</div>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2011-06-26T00:00:00+05:30" data-updated="true" itemprop="datePublished">Jun 26<sup>th</sup>, 2011</time></div>
		<div class="tags">


	<a class='category' href='/blog/blog/categories/asp-dot-net-mvc/'>asp.net mvc</a>


</div>
		
			<span class="comments"><a href="/blog/2011/06/26/ajax-mvc3-ajax-part-ii-adding-animation/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2011/06/26/ajax-mvc3-ajax-part-ii-adding-animation/" itemprop="url">ASP.NET MVC3 Ajax Part II - Adding Animation to Action Link</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<div class='post'>
	<div>
		<p>This blog post is the continuation of my <a href="/blog/2011/06/24/aspnet-mvc-3-ajax-part-i/">previous blog post</a>. In the last blog post we have seen how to achieve the basic Ajax functionality using <em>Ajax.ActionLink()</em> helper method. Probably in many websites you might have seen whenever any ajax request is raised by the user, there would be an associated loading text or a loading gif will be displayed which inform the user that something is going on the background. We are now going to see how to achieve the same using the <em>ActionLink()</em> method.</p>
		<p>
			<em>ActionLink()</em> method uses a&nbsp;declarative approach to do this. All we need to do is to create a div element contains the element which will be displayed during the Ajax request and associate the div element to the <em>ActionLink()</em> method by assigning the &#8221;<em>LoadingElementId</em>&#8221; AjaxOption to the div element&#8217;s id. Let us see how to do this by using the MVC3 app that we have seen in the <a href="/blog/2011/06/24/aspnet-mvc-3-ajax-part-i/">previous blog post</a>.
		</p>
		<h3>Adding Loading Div Element</h3>
		Open &#8220;Index.cshtml&#8221; and append the following div. It just contains image element which will be displayed during ajax request.
<div><script src='https://gist.github.com/2ca8aaef6714aafaa889.js?file=Index.cshtml'></script>
<noscript><pre><code>&lt;div id=&quot;divLoading&quot; style=&quot;display:none&quot;&gt;
	&lt;img src=&quot;../../Content/images/loading.gif&quot; /&gt;
&lt;/div&gt;</code></pre></noscript></div>

	<p>Note the inline style. The display has been set to none as it not intended to display only during Ajax request. </p>
		<h3>Associate Div Element with <em>ActionLink()</em> method</h3>
		<p>This is very simple. We just need to add the AjaxOption &#8221;<em>LoadingElementId</em>&#8221; and assign it to the loading div element&#8217;s id. The modified <em>ActionLink()</em> method will look as follows.</p>
		<div style="clear: both; text-align: center;">
			<img src="http://1.bp.blogspot.com/-6NlSqFH_RBU/TgbDPO7tB_I/AAAAAAAAAHc/BEEQT3XEWmQ/s1600/ActionLink+Method.png" /></div>
		<br />
		<h3>Simulating a delay in Action Method</h3>
		<p>Now when we run the application we might not get a chance to see the loading gif as everything takes place is very less time. In order to see the loading gif, we need to increase the processing time taken by the GreetMe action method. The modified GreetMe action method in <em>HomeController.cs</em> will look as follows. The delay has been introduced by using the <em>Thread.Sleep()</em> method which delay the process by 2 seconds. </p>
		<div><script src='https://gist.github.com/2ca8aaef6714aafaa889.js?file=HomeController.cs'></script>
<noscript><pre><code>public string GreetMe() 
{
  System.Threading.Thread.Sleep(2000);
  return &quot;Hello ASP.NET MVC3 Ajax !!&quot;;
}</code></pre></noscript></div>

	<br />
		Now when we run the application we will be able to see the loading gif when the Greet Me link is clicked.
	<h3>Summary</h3>
		In the Part i &amp; ii of this series we have seen a basic Ajax functionality using <em>Ajax.ActionLink()</em> method. The source code of the demo application can be downloaded from <a href="http://www.box.net/shared/zmn84rj31g2kdx19flxq">here</a>.
	</div>
</div>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2011-06-24T00:00:00+05:30" data-updated="true" itemprop="datePublished">Jun 24<sup>th</sup>, 2011</time></div>
		<div class="tags">


	<a class='category' href='/blog/blog/categories/asp-dot-net-mvc/'>asp.net mvc</a>


</div>
		
			<span class="comments"><a href="/blog/2011/06/24/aspnet-mvc-3-ajax-part-i/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2011/06/24/aspnet-mvc-3-ajax-part-i/" itemprop="url">ASP.NET MVC 3 Ajax - Part I</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<div class='post'>
    <div>

        <p>
            In this blog series ASP.NET MVC3 Ajax we are going to explore about implementing Ajax features in ASP.NET MVC3 Web application and 
	this blog post will cover the basics of ASP.NET MVC3 Ajax.
        </p>

        <p>
            MVC3 makes use of <a href="http://en.wikipedia.org/wiki/Unobtrusive_JavaScript">Unobtrusive javascript</a> which results a clear and 
        clean separation between the functionality and the View/Presention of the webpage. 
        We can introduce Ajax features to the MVC3 application using two ways.
        </p>

        <ol>

            <li>
                <h5>Ajax Helper Methods</h5>
                - Enable us to achieve Ajax without writing no/less javascript
            </li>

            <li>
                <h5>jQuery Ajax</h5>
                - We need to write the code using javascript and jQuery ajax

            </li>

        </ol>
        <p>
            Ajax Helper Methods are very simple and intuitive to get start with. 
        So, I&#8217;ll be covering the Ajax Helper Methods and will cover the jQuery Ajax in the future posts of this blog series.
        </p>

        <h4>Ajax Helper Methods</h4>
        <p>
            It enables us to implement ajax feature without writing much code. 
    <i>Ajax.ActionLink()</i> is one of the fundamental Ajax helper method that returns a anchor element (&lt;a&gt;&lt;/a&gt;) with the URL 
        of the action method; When the action link is clicked, the action method in the specified URL is invoked asynchronously and 
        result is sent back to the client. Let us see it in detail by using sample demo application.
        </p>

        <ul>
            <li>Create a new ASP.NET MVC3 Project &#8220;AjaxGettingStarted&#8221; </li>
            <li>Select &#8221;<b>Empty</b>&#8221; template and &#8221;<b>Razor</b>&#8221; as view engine and click &#8221;<b>Ok</b>&#8221;</li>
            <li>ASP.NET MVC3 project template shipped with the <b>scripts folder </b>which contains the all the jQuery library files 
                that are required for doing Ajax and other client side functionalities. 
                To implement ajax we should use the references of &#8220;jQuery&#8221; and &#8220;jQuery.unobtrusive-ajax&#8221; minified js files in our view
                    <div style="text-align: center">
                        <img src="http://4.bp.blogspot.com/-cYTipiOz2uQ/TgR_YKzsliI/AAAAAAAAAHU/R8X1FQYpAfM/s1600/2.+Scripts+Folder.PNG" />
                    </div>
            </li>
            <li>Create a Controller with the name <em>HomeController</em> by right clicking the &#8220;Controllers&#8221; folder and 
                select &#8220;Add&#8221; -&gt; &#8220;Controller&#8221;</li>
            <li>The HomeController.cs file will be created under controllers folder with the following code.
                <div><script src='https://gist.github.com/c087dba84453acbd23b1.js?file=HomeController.cs'></script>
<noscript><pre><code>public class HomeController : Controller    
{        
	public ActionResult Index()
	{             
		return View();
	}
}</code></pre></noscript></div>

            </li>
            <li>Then right click inside the Index() Action Method and select &#8220;Add View&#8221;. Leave the default setting and click &#8220;Add&#8221;.</li>
            <li>This would create the view &#8220;Index.cshtml&#8221; under the folder &#8220;Views/Home&#8221;.</li>
            <li>Add the following action method in HomeController.cs file
                <div><script src='https://gist.github.com/c087dba84453acbd23b1.js?file=HomeController_GreetMe.cs'></script>
<noscript><pre><code>public string GreetMe()
{
    return &quot;Hello ASP.NET MVC3 Ajax!!&quot;;
}</code></pre></noscript></div>

                This action method will be called asynchronously called using Ajax.ActionLink helper method. 
                This just written a string which will be displayed in the view via Ajax. </li>
        </ul>
        <ul>
            <li>Add the script reference to the &#8220;jQuery&#8221; and &#8220;jQuery.unobtrusive-ajax&#8221; minified js files in Index.cshtml file.
            <div><script src='https://gist.github.com/c087dba84453acbd23b1.js?file=Index.cshtml'></script>
<noscript><pre><code>&lt;script src=&quot;@Url.Content(&quot;~/Scripts/jquery-1.5.1.min.js&quot;)&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;
&lt;script src=&quot;@Url.Content(&quot;~/Scripts/jquery.unobtrusive-ajax.js&quot;)&quot; type=&quot;text/javascript&quot;&gt;&lt;/script&gt;</code></pre></noscript></div>

            </li>
            <li>
                <p>Now all the setup in place to implement the basic Ajax functionality using Ajax.ActionLink Helper method. Before seeing this method in action let me explain bit more about this method. There are 12 overloads for this method amoung which the simplest one is </p>
                <em>Ajax.ActionLink(string linkText, string actionName, AjaxOptions ajaxOptions)</em>
                <p>The first parameter is the Link text which will be displayed in the view, the second parameter is the name of the action method which should be invoked while clicking the action link and the third parameter is AjaxOptions which defines how the Ajax request/response will take place and used to tell MVC exactly what you want your Ajax call to do.</p>
            </li>
        </ul>
        <ul>
            <li>AjaxOptions class will have the following properties
                <ol>
                    <li>Confirm - Gets or sets the message to display in a confirmation window before a request is submitted.</li>
                    <li>HttpMethod - Gets or sets the HTTP request method (&#8220;Get&#8221; or &#8220;Post&#8221;).</li>
                    <li>InsertionMode - Gets or sets the mode that specifies how to insert the response into the target DOM element</li>
                    <li>LoadingElementId - Gets or sets the id attribute of an HTML element that is displayed while the Ajax function is loading.</li>
                    <li>OnBegin - Gets or sets the name of the JavaScript function to call immediately before the page is updated. </li>
                    <li>OnComplete - Gets or sets the JavaScript function to call when response data has been instantiated but before the page is updated. </li>
                    <li>OnError - Gets or sets the JavaScript function to call if the page update fails.</li>
                    <li>OnSuccess - Gets or sets the JavaScript function to call after the page is successfully updated.</li>
                    <li>UpdateTargetId - Gets or sets the ID of the DOM element to update by using the response from the server.</li>
                    <li>URL - Gets or sets the URL to make the request to.</li>
                </ol>
            </li>
        </ul>
        <ul>
            <li>In our sample demo application we are just going to have a link called &#8220;Greet Me&#8221;. 
                Upon clicking on that click we are going make Ajax request to GreetMe action method and 
                populate a div tag with the value returned by the action method</li>
            <li>Add the following code in the index.cshtml file. which implements the above step.
	            <div><script src='https://gist.github.com/c087dba84453acbd23b1.js?file=Index_ActionLink.cshtml'></script>
<noscript><pre><code>@Ajax.ActionLink(&quot;Greet Me&quot;, &quot;GreetMe&quot;, 
	new AjaxOptions() {
		UpdateTargetId=&quot;divGreetings&quot;, 
		HttpMethod=&quot;GET&quot;                	
	}
)</code></pre></noscript></div>

	            This ActionLink method call just creates an Ajax action link with the text &#8220;Greet Me&#8221;, 
                upon clicking the link it invoke the &#8220;GreetMe&#8221; action method name which we already defined 
                in the HomeController with the ajax option &#8220;HttpGetRequest&#8221; and update the Dom element with id &#8220;divGreetings&#8221; 
                with the results that we are getting from the GreetMe action method, which is a simple string &#8220;Hello ASP.NET MVC3 Ajax!!&#8221;</li>
        </ul>
        <div style="text-align:center">

            <img src="http://3.bp.blogspot.com/-X90DCHXAEQQ/TgWJkXaXijI/AAAAAAAAAHY/pKzrPDNWNF4/s1600/3-output.PNG"/>
            
        </div>
        <strong>Summary</strong>
            <p>In this blog post we have implemented a basic ajax feature using Ajax.ActionLink helper method. 
                In the <a href="/blog/2011/06/26/ajax-mvc3-ajax-part-ii-adding-animation/">next blog post </a> 
                of the series we would see how to add some add interactive animation during the ajax request.</p>

    </div>
</div>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2011-04-24T00:00:00+05:30" data-updated="true" itemprop="datePublished">Apr 24<sup>th</sup>, 2011</time></div>
		<div class="tags">


	<a class='category' href='/blog/blog/categories/c-number/'>c#</a>, <a class='category' href='/blog/blog/categories/programming/'>programming</a>


</div>
		
			<span class="comments"><a href="/blog/2011/04/24/dynamic-polymorphism-real-time-example/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2011/04/24/dynamic-polymorphism-real-time-example/" itemprop="url">Dynamic Polymorphism - a Real Time Example</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<div class='post'>
    <div>
        <p>
            In this blog post we are going to see, how to achieve dynamic polymorphism in c# using interfaces through a 
            small game simulator called &#8220;War&#8221;.
        </p>

        <div style="text-align: center">
            <img src="http://3.bp.blogspot.com/-F-5wRIWJiKE/TbOvdE6MOnI/AAAAAAAAAGM/r1vs5p8LzUE/s1600/WarForm.png" />
        </div>


        <p>The simulator is simple and straight forward to play. The user just need to select a weapon and click on &#8220;Attack&#8221;.</p>

        <p>
            Let me explain some theoretical background about &#8220;Dynamic Polymorphism&#8221; before dive into implementing the Game simulator. 
            To put in a simple terms, Dynamic Polymorphism means changing the behavior at run time. 
            Let us see an example of what does it mean. If a dog smells a cat, it will bark and if it smells a food, it will salivate. 
            Here, the smelling sense of the dog is same. But depending on what does it smell, it change its behavior. 
            Hope now you are aware of what is mean by dynamic polymorphism. 
            Just stop reading and think what is the dynamic polymorphic behavior here in the &#8220;War&#8221; simulator.
        </p>

        <p>
            Yes, you are absolutely correct!! The Attacking behavior is the dynamic polymorphic behavior. 
            The behavior of attack button will vary with respect to the weapon the user has chosen.
        </p>

        <p>Fine.. Lets dive into the code!!</p>

        <h4>Step1: Design the Main Form</h4>

        <ol>
            <li>Create a new Windows Forms Application and name it as &#8220;War&#8221;</li>
            <li>Rename the &#8220;Form1.cs&#8221; file to &#8220;MainForm.cs&#8221; and Click &#8220;Yes&#8221; to let the Visual Studio to do the renaming for you.</li>
            <li>Add a groupbox control and change its &#8220;Text&#8221; Property to &#8220;Weapon&#8221;</li>
            <li>Add three radio button controls inside the groupbox and change their &#8220;Text&#8221; Property to Sword, Gun and bomb respectively.</li>
            <li>Add a button control and change its &#8220;Text&#8221; property to &#8220;Attack!!&#8221;.</li>
            <li>Rename the &#8220;Name &#8221; property of all the controls added to some meaningful names like rboSword for Sword Radiobutton</li>
            <li>The Final Finished will look like the screenshot in the beginning of this blog.&nbsp;&nbsp; </li>
        </ol>

        <h4>Step 2: Create an Interface called IWeapon</h4>

        <ol>
            <li>Right click on the Project name &#8220;War&#8221; in the solution explorer and add a new interface file called &#8220;IWeapon.cs&#8221;</li>
            <li>This interface IWeapon will have a public method called &#8220;Attack&#8221; which defines a contract so that all the Weapon we are going to create should implement this IWeapon interface and provide the implementation code for the Attack() method</li>
        </ol>

        <div><script src='https://gist.github.com/062dc9ce4593c16aaf82.js?file=IWeapon.cs'></script>
<noscript><pre><code>public interface IWeapon 
{ 
    void Attack(); 
}</code></pre></noscript></div>



        <h4>Step3: Create the concrete Weapon Classes&nbsp;</h4>
        <ol>
            <li>Add three class files to the &#8220;War&#8221; Project with the names &#8220;Sword.cs&#8221;, &#8220;&#8221;Gun.cs&#8221;, &#8220;Bomb.cs&#8221;</li>
            <li>These classes represents the actual weapons and that we are going use in our simulator. Each of these classes will implement the IWeapon interface and provide the implementation code for the &#8220;Attack()&#8221; method.</li>
            <li>Modify the class files as follows</li>
        </ol>


        <div><script src='https://gist.github.com/062dc9ce4593c16aaf82.js?file=Sword.cs'></script>
<noscript><pre><code>public class Sword : IWeapon    
{       
    public void Attack() 
    {            
        System.Windows.Forms.MessageBox.Show(&quot;Sword!!&quot;);        
    }    
}</code></pre></noscript></div>


        <div><script src='https://gist.github.com/062dc9ce4593c16aaf82.js?file=Gun.cs'></script>
<noscript><pre><code>public class Gun : IWeapon    
{       
    public void Attack() 
    {            
        System.Windows.Forms.MessageBox.Show(&quot;Gun!!&quot;);        
    }    
}</code></pre></noscript></div>


        <div><script src='https://gist.github.com/062dc9ce4593c16aaf82.js?file=Bomb.cs'></script>
<noscript><pre><code>public class Bomb : IWeapon    
{       
    public void Attack() 
    {
        System.Windows.Forms.MessageBox.Show(&quot;Bomb!!&quot;);        
    }    
}</code></pre></noscript></div>


        <p>The Attack() method will show a message box with a text saying the weapon name being used.</p>

        <h4>Step 4: Program the &#8220;War&#8221; Simulator Main Form</h4>
        <p>Now the stage is set for the real show. Let us wire the code of MainForm.cs and make the &#8220;War&#8221; simulator.</p>
        <ol>
            <li>Add a private instance variable of type IWeapon in the MainForm class and initialize with the sword class. 
                This will hold the reference of current weapon being used Note: Sword is the default weapon.
                <div><script src='https://gist.github.com/062dc9ce4593c16aaf82.js?file=MainForm.cs'></script>
<noscript><pre><code>public partial class MainForm : Form
{
	private IWeapon weapon = new Sword();	
}</code></pre></noscript></div>

            </li>
            <li>Now we are going to add event handlers for the weapons radio buttons. 
                They will change the reference stored in the instance variable &#8220;weapon&#8221; to the respective Weapons class. 
                Add the checked change event for all the radio button and their event handlers will look like as follows.
                <div><script src='https://gist.github.com/062dc9ce4593c16aaf82.js?file=ChangeWeaponHandler.cs'></script>
<noscript><pre><code>private void rboSword_CheckedChanged(object sender, EventArgs e)
{
	weapon = new Sword();
}
private void rboGun_CheckedChanged(object sender, EventArgs e)
{
	weapon = new Gun();
}
private void rboBomb_CheckedChanged(object sender, EventArgs e)
{
	weapon = new Bomb();
}</code></pre></noscript></div>

            </li>
            <li>Add the Click event handler for the &#8220;Attack&#8221; button. 
                This event handler will simply call the Attack() method of the instance variable &#8220;weapon&#8221;
                <div><script src='https://gist.github.com/062dc9ce4593c16aaf82.js?file=AttackHandler.cs'></script>
<noscript><pre><code>private void btnAttack_Click(object sender, EventArgs e)
{
	weapon.Attack();
}</code></pre></noscript></div>

            </li>
        </ol>

        <b>Summary</b>
        <p>In this blog we have seen a basic real time example on implementing dynamic polymorphism. You can download the source code of this sample from <a href="http://www.box.net/shared/y12zyr2d66">here</a>.</p>
    </div>
</div>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2011-04-01T00:00:00+05:30" data-updated="true" itemprop="datePublished">Apr 1<sup>st</sup>, 2011</time></div>
		<div class="tags">


	<a class='category' href='/blog/blog/categories/data-access/'>data access</a>, <a class='category' href='/blog/blog/categories/entity-framework/'>entity framework</a>


</div>
		
			<span class="comments"><a href="/blog/2011/04/01/entity-framework-40-as-class-library/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2011/04/01/entity-framework-40-as-class-library/" itemprop="url">Entity Framework 4.0 as Class Library - Part 2</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<div class='post'>
    <div>
        <p>As the continuation of my previous <a href="/blog/2011/03/25/entity-framework-40-class-library-part/">blog post</a>, In this blog post we are going to explore on how to consume the data access class library created in the previous blog post.</p>

        <p>Consuming the Data Access Library created using Entity Framework 4.0 involves the following two steps.</p>
        <ol>
            <li>Adding reference to the class library</li>
            <li>Adding the connection string in the config file (App.config or Web.config)</li>
        </ol>
        <p>Let us see how can we do these steps using a console application. To keep things simple I have opt for a console application. It holds the same for an ASP.NET , Windows Form, WPF,WCF, etc.</p>

        <h4>Console Application Creation</h4>
        <p>Create a new console application called &#8220;HrdConsoleApp&#8221;</p>
        <img src="http://1.bp.blogspot.com/-jd1uE7HyzUY/TZw4OSKgKVI/AAAAAAAAAFw/O0t-17BazAk/s1600/1.ConsoleAppCreation.PNG" />

        <h4>Add a reference to the Class library</h4>
        <p>Right click on references and refer the class library &#8220;HRD.DataAccess&#8221; that we have created in the last blog.</p>
        <img src="http://4.bp.blogspot.com/-238LBeCcS-8/TZw4UoXoTyI/AAAAAAAAAF0/Z-wMwpTZD1k/s1600/2.ReferenceLibrary.PNG" />

        <p>Add reference to System.Data.Entity Library</p>
        <img src="http://4.bp.blogspot.com/-TIhl2OiTt68/TZw59TQrQ6I/AAAAAAAAAF8/WM5ffjSpETo/s1600/5.DataEntityReference.PNG" />

        <p>Add the App.Config file to the console application by right clicking on the project name in the solution explorer and select &#8220;Add-&gt;New Item&#8221;. Then Copy the connection string from the App.Config file created in the HrdDataAccess Class library Project created earlier and paste it in the App.config file created in the previous step.</p>
        <img src="http://2.bp.blogspot.com/-ZqMXJ5KdLy8/TZw4Y1uECQI/AAAAAAAAAF4/fIcRIy1se5c/s1600/3.AppConfigCreation.PNG" />

        <img src="http://2.bp.blogspot.com/-HgFzRYacpQA/TZw6IqMd5oI/AAAAAAAAAGA/q_IiJsTNYvU/s1600/4.AppConfig.PNG" />
        <p>That&#8217;s all now it is all set to access the database with only minimal amount of code.. Here we go!!</p>
        <h4>Code Please!</h4>
        <div><script src='https://gist.github.com/7794bb7ac98d6de3b962.js'></script>
<noscript><pre><code>using System;
using System.Linq;
using HRD.DataAccess;
namespace HrdConsoleApp
{
    class Program
    { 
        static void Main(string[] args) 
        { 
            var hrdEntities = new HRDEntities(); 
            foreach (Employee employee in hrdEntities.Employees)
            { 
                Console.WriteLine(&quot;Name: &quot; + employee.Name); 
                Console.WriteLine(&quot;Department: &quot; + employee.Department.Name); 
                Console.WriteLine(&quot;########################&quot;); 
            } 
        } 
    }
}</code></pre></noscript></div>


        <h4>Output</h4>
        <img src="http://1.bp.blogspot.com/-Fooy-W2-OCQ/TZw6M7tVqTI/AAAAAAAAAGE/tJ5UYVi5LRI/s1600/6.Output.PNG" />

        <h4>Summary:</h4>
        <p>
            In this blog series (Part 1 and Part 2) we have seen how to create the data access layer using Entity Framework 4.0 as class library and how to consume it in an application. With the introduction of Entity Framework developing the code for data access layer is no longer a tidy and time consuming job!!
        </p>
    </div>
</div>

		
		
	</div>

</article>

</div>
<nav id="pagenavi">
    
        <a href="2" class="prev">Prev</a>
    
    
        <a href="4" class="next">Next</a>
    
    <div class="center"><a href="/blog/blog/archives">Blog Archives</a></div>
</nav></div>
			</div>
			<footer id="footer" class="inner">Copyright &copy; 2015

    Tamizhvendan S


Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a></footer>
		</div>
	</div>
	

<script type="text/javascript">
      var disqus_shortname = 'tamizhvendan-blog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>






</body>
</html>
