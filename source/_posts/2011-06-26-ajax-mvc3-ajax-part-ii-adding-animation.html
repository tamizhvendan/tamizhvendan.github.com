---
layout: post
title: "ASP.NET MVC3 Ajax Part II - Adding Animation to Action Link"
date: 2011-06-26
comments: true
categories:
 - ASP.NET MVC
---

<div class='post'>
<div><p>This blog post is the continuation of my <a href="{% post_url 2011-06-24-aspnet-mvc-3-ajax-part-i %}">previous blog post</a>. In the last blog post we have seen how to achieve the basic Ajax functionality using <em>Ajax.ActionLink()</em> helper method. Probably in many websites you might have seen whenever any ajax request is raised by the user, there would be an associated loading text or a loading gif will be displayed which inform the user that something is going on the background. We are now going to see how to achieve the same using the <em>ActionLink()</em> method.</p>
	<p>
	<em>ActionLink()</em> method uses a&nbsp;declarative approach to do this. All we need to do is to create a div element contains the element which will be displayed during the Ajax request and associate the div element to the <em>ActionLink()</em> method by assigning the "<em>LoadingElementId</em>" AjaxOption to the div element's id. Let us see how to do this by using the MVC3 app that we have seen in the <a href="{% post_url 2011-06-24-aspnet-mvc-3-ajax-part-i %}">previous blog post</a>.</p>
	<h3>Adding Loading Div Element</h3>
	Open "Index.cshtml" and append the following div. It just contains image element which will be displayed during ajax request.
{% codeblock lang:html %}
<div id="divLoading" style="display:none">
	<img src="../../Content/images/loading.gif" />
</div>
{% endcodeblock %}
	<p>Note the inline style. The display has been set to none as it not intended to display only during Ajax request. </p>
	<h3>Associate Div Element with <em>ActionLink()</em> method</h3>
	<p>This is very simple. We just need to add the AjaxOption "<em>LoadingElementId</em>" and assign it to the loading div element's id. The modified <em>ActionLink()</em> method will look as follows.</p><div class="separator" style="clear: both; text-align: center;"><a href="http://1.bp.blogspot.com/-6NlSqFH_RBU/TgbDPO7tB_I/AAAAAAAAAHc/BEEQT3XEWmQ/s1600/ActionLink+Method.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img src="http://1.bp.blogspot.com/-6NlSqFH_RBU/TgbDPO7tB_I/AAAAAAAAAHc/BEEQT3XEWmQ/s320/ActionLink+Method.png" /></a></div><br />
	<h3>Simulating a delay in Action Method</h3><p>Now when we run the application we might not get a chance to see the loading gif as everything takes place is very less time. In order to see the loading gif, we need to increase the processing time taken by the GreetMe action method. The modified GreetMe action method in <em>HomeController.cs</em> will look as follows. The delay has been introduced by using the <em>Thread.Sleep()</em> method which delay the process by 2 seconds. </p>
	{% codeblock lang:csharp %}
public string GreetMe() 
{
  System.Threading.Thread.Sleep(2000);
  return "Hello ASP.NET MVC3 Ajax !!";
}
{% endcodeblock %}
	<br />Now when we run the application we will be able to see the loading gif when the Greet Me link is clicked.
	<h3>Summary</h3>In the Part i &amp; ii of this series we have seen a basic Ajax functionality using <em>Ajax.ActionLink()</em> method. The source code of the demo application can be downloaded from <a href="http://www.box.net/shared/zmn84rj31g2kdx19flxq">here</a>.</div></div>