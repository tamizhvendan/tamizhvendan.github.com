---
layout: post
title: "ASP.NET MVC 3 Ajax - Part I"
date: 2011-06-24
comments: true
categories:
 - ASP.NET MVC
---

<div class='post'>
    <div>

        <p>
            In this blog series ASP.NET MVC3 Ajax we are going to explore about implementing Ajax features in ASP.NET MVC3 Web application and 
	this blog post will cover the basics of ASP.NET MVC3 Ajax.
        </p>

        <p>
            MVC3 makes use of <a href="http://en.wikipedia.org/wiki/Unobtrusive_JavaScript">Unobtrusive javascript</a> which results a clear and 
        clean separation between the functionality and the View/Presention of the webpage. 
        We can introduce Ajax features to the MVC3 application using two ways.
        </p>

        <ol>

            <li>
                <h5>Ajax Helper Methods</h5>
                - Enable us to achieve Ajax without writing no/less javascript
            </li>

            <li>
                <h5>jQuery Ajax</h5>
                - We need to write the code using javascript and jQuery ajax

            </li>

        </ol>
        <p>
            Ajax Helper Methods are very simple and intuitive to get start with. 
        So, I'll be covering the Ajax Helper Methods and will cover the jQuery Ajax in the future posts of this blog series.
        </p>

        <h4>Ajax Helper Methods</h4>
        <p>
            It enables us to implement ajax feature without writing much code. 
    <i>Ajax.ActionLink()</i> is one of the fundamental Ajax helper method that returns a anchor element (&lt;a&gt;&lt;/a&gt;) with the URL 
        of the action method; When the action link is clicked, the action method in the specified URL is invoked asynchronously and 
        result is sent back to the client. Let us see it in detail by using sample demo application.
        </p>

        <ul>
            <li>Create a new ASP.NET MVC3 Project "AjaxGettingStarted" </li>
            <li>Select "<b>Empty</b>" template and "<b>Razor</b>" as view engine and click "<b>Ok</b>"</li>
            <li>ASP.NET MVC3 project template shipped with the <b>scripts folder </b>which contains the all the jQuery library files 
                that are required for doing Ajax and other client side functionalities. 
                To implement ajax we should use the references of "jQuery" and "jQuery.unobtrusive-ajax" minified js files in our view
                    <div style="text-align: center">
                        <img src="http://4.bp.blogspot.com/-cYTipiOz2uQ/TgR_YKzsliI/AAAAAAAAAHU/R8X1FQYpAfM/s1600/2.+Scripts+Folder.PNG" />
                    </div>
            </li>
            <li>Create a Controller with the name <em>HomeController</em> by right clicking the "Controllers" folder and 
                select "Add" -&gt; "Controller"</li>
            <li>The HomeController.cs file will be created under controllers folder with the following code.
                {% gist c087dba84453acbd23b1 HomeController.cs %}
            </li>
            <li>Then right click inside the Index() Action Method and select "Add View". Leave the default setting and click "Add".</li>
            <li>This would create the view "Index.cshtml" under the folder "Views/Home".</li>
            <li>Add the following action method in HomeController.cs file
                {% gist c087dba84453acbd23b1 HomeController_GreetMe.cs %}
                This action method will be called asynchronously called using Ajax.ActionLink helper method. 
                This just written a string which will be displayed in the view via Ajax. </li>
        </ul>
        <ul>
            <li>Add the script reference to the "jQuery" and "jQuery.unobtrusive-ajax" minified js files in Index.cshtml file.
            {% gist c087dba84453acbd23b1 Index.cshtml %}
            </li>
            <li>
                <p>Now all the setup in place to implement the basic Ajax functionality using Ajax.ActionLink Helper method. Before seeing this method in action let me explain bit more about this method. There are 12 overloads for this method amoung which the simplest one is </p>
                <em>Ajax.ActionLink(string linkText, string actionName, AjaxOptions ajaxOptions)</em>
                <p>The first parameter is the Link text which will be displayed in the view, the second parameter is the name of the action method which should be invoked while clicking the action link and the third parameter is AjaxOptions which defines how the Ajax request/response will take place and used to tell MVC exactly what you want your Ajax call to do.</p>
            </li>
        </ul>
        <ul>
            <li>AjaxOptions class will have the following properties
                <ol>
                    <li>Confirm - Gets or sets the message to display in a confirmation window before a request is submitted.</li>
                    <li>HttpMethod - Gets or sets the HTTP request method ("Get" or "Post").</li>
                    <li>InsertionMode - Gets or sets the mode that specifies how to insert the response into the target DOM element</li>
                    <li>LoadingElementId - Gets or sets the id attribute of an HTML element that is displayed while the Ajax function is loading.</li>
                    <li>OnBegin - Gets or sets the name of the JavaScript function to call immediately before the page is updated. </li>
                    <li>OnComplete - Gets or sets the JavaScript function to call when response data has been instantiated but before the page is updated. </li>
                    <li>OnError - Gets or sets the JavaScript function to call if the page update fails.</li>
                    <li>OnSuccess - Gets or sets the JavaScript function to call after the page is successfully updated.</li>
                    <li>UpdateTargetId - Gets or sets the ID of the DOM element to update by using the response from the server.</li>
                    <li>URL - Gets or sets the URL to make the request to.</li>
                </ol>
            </li>
        </ul>
        <ul>
            <li>In our sample demo application we are just going to have a link called "Greet Me". 
                Upon clicking on that click we are going make Ajax request to GreetMe action method and 
                populate a div tag with the value returned by the action method</li>
            <li>Add the following code in the index.cshtml file. which implements the above step.
	            {% gist c087dba84453acbd23b1 Index_ActionLink.cshtml %}
	            This ActionLink method call just creates an Ajax action link with the text "Greet Me", 
                upon clicking the link it invoke the "GreetMe" action method name which we already defined 
                in the HomeController with the ajax option "HttpGetRequest" and update the Dom element with id "divGreetings" 
                with the results that we are getting from the GreetMe action method, which is a simple string "Hello ASP.NET MVC3 Ajax!!"</li>
        </ul>
        <div style="text-align:center">

            <img src="http://3.bp.blogspot.com/-X90DCHXAEQQ/TgWJkXaXijI/AAAAAAAAAHY/pKzrPDNWNF4/s1600/3-output.PNG"/>
            
        </div>
        <strong>Summary</strong>
            <p>In this blog post we have implemented a basic ajax feature using Ajax.ActionLink helper method. 
                In the <a href="{% post_url 2011-06-26-ajax-mvc3-ajax-part-ii-adding-animation %}">next blog post </a> 
                of the series we would see how to add some add interactive animation during the ajax request.</p>

    </div>
</div>
