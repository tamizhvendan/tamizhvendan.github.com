---
layout: post
title: "ASP.NET MVC 3 Ajax - Part I"
date: 2011-06-24
comments: false
categories:
 - ASP.NET MVC 3
---

<div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on">In this blog series ASP.NET MVC3 Ajax we are going to explore about implementing Ajax features in ASP.NET MVC3 Web application and this blog post will cover the basics of ASP.NET MVC3 Ajax.<br /><br />MVC3 makes use of <a href="http://en.wikipedia.org/wiki/Unobtrusive_JavaScript">Unobtrusive javascript</a> which results a clear and clean seperation between the functionality and the View/Presention of the webpage. We can introduce Ajax features to the MVC3 application using two ways.<br /><ol><li>Ajax Helper Methods - Enable us to achieve Ajax without writing no/less javascript</li><li>jQuery Ajax - We need to write the code using javascript and jQuery ajax</li></ol>Ajax Helper Methods are very simple and intutive to get start with. So, I'll be covering the Ajax Helper Methods and will cover the jQuery Ajax in the future posts of this blog series.<br /><br /><b>Ajax Helper Methods</b><br /><br />It enable us to implement ajax feature without writing much code. Ajax.ActionLink() is one of the fundamental Ajax helper method that returns a anchor element (&lt;a&gt;&lt;/a&gt;) with the URL of the action method; When the action link is clicked, the action method in the specified URL is invoked asynchronously and result is sent back to the client. Let us see it in detail by using sample demo application.<br /><ul><li>Create a new ASP.NET MVC3 Project "AjaxGettingStarted" </li><li>Select "<b>Empty</b>" template and "<b>Razor</b>" as view engine and click "<b>Ok</b>"</li><li>ASP.NET MVC3 project template shipped with the <b>scripts folder </b>which contains the all the jQuery library files that are required for doing Ajax and other client side functionalities. To implement ajax we should use the references of "jQuery" and "jQuery.unobtrusive-ajax" minified js files in our view</li><div class="separator" style="clear: both; text-align: center;"><a href="http://4.bp.blogspot.com/-cYTipiOz2uQ/TgR_YKzsliI/AAAAAAAAAHU/R8X1FQYpAfM/s1600/2.+Scripts+Folder.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="320px" i$="true" src="http://4.bp.blogspot.com/-cYTipiOz2uQ/TgR_YKzsliI/AAAAAAAAAHU/R8X1FQYpAfM/s320/2.+Scripts+Folder.PNG" width="232px" /></a></div><li><a href="https://ch1blogs/blogs/211239/files/2011/06/2-scripts-folder.PNG" title="2-scripts-folder.PNG"></a>&nbsp;</li><li>Create a Controller with the name ""<b>HomeController</b>" by right clicking the "Controllers" folder and select "Add" -&gt; "Controller"</li><li>The HomeController.cs file will be created under controllers folder with the following code.<br /><br /><pre class="csharp" name="code">public class HomeController : Controller    <br />{<br />        public ActionResult Index() <br />        { <br /><br />            return View(); <br /><br />        } <br /><br />    }</pre></li><li>Then right click inside the Index() Action Method and select "<b>Add View</b>". Leave the default setting and click "<b>Add</b>".</li><li>This would create the view "<b>Index.cshtml</b>" under the folder "Views/Home".</li><li>Add the following action method in HomeController.cs file<br /><pre class="csharp" name="code">public string GreetMe()<br />        {<br />            return "Hello ASP.NET MVC3 Ajax!!";<br />        }<br /></pre>This action method will be called asychronously called using Ajax.ActionLink helper method. This just written a string which will be displayed in the view via Ajax. </li></ul><ul><li>Add the script reference to the "jQuery" and "jQuery.unobtrusive-ajax" minified js files in Index.cshtml file.</li><li><br /><pre class="csharp" name="code"><script jquery-1.4.4.js")"="" scripts="" src="@Url.Content%28" type="text/javascript" ~=""><br /></script><br /><script jquery.unobtrusive-ajax.min.js")"="" scripts="" src="@Url.Content%28" type="text/javascript" ~=""><br /></script><br /></pre></li><li>Now all the setup in place to implement the basic Ajax functionality using Ajax.ActionLink Helper method. Before seeing this method in action let me explain bit more about this method. There are 12 overloads for this method amoung which the simplest one is Ajax.ActionLink(string linkText, string actionName, AjaxOptions ajaxOptions). The first parameter is the Link text which will be displayed in the view, the second parameter is the name of the action method which should be invoked while clicking the action link and the third parameter is AjaxOptions which defines how the Ajax request/response will take place and used to tell MVC exactly what you want your Ajax call to do.</li></ul><ul><li>AjaxOptions class will have the following properties.Confirm - Gets or sets the message to display in a confirmation window before a request is submitted.HttpMethod - Gets or sets the HTTP request method ("Get" or "Post").<br /><br />InsertionMode - Gets or sets the mode that specifies how to insert the response into the target DOM element.<br /><br />LoadingElementId - Gets or sets the id attribute of an HTML element that is displayed while the Ajax function is loading.<br /><br />OnBegin - Gets or sets the name of the JavaScript function to call immediately before the page is updated.<br /><br />OnComplete - Gets or sets the JavaScript function to call when response data has been instantiated but before the page is updated.<br /><br />OnError - Gets or sets the JavaScript function to call if the page update fails.<br /><br />OnSuccess - Gets or sets the JavaScript function to call after the page is successfully updated.<br /><br />UpdateTargetId - Gets or sets the ID of the DOM element to update by using the response from the server.<br /><br />URL - Gets or sets the URL to make the request to.</li></ul><ul><li>In our sample demo application we are just going to have a link called "Greet Me". Upon clicking on that click we are going make Ajax request to GreetMe action method and populate a div tag with the value returned by the action method</li><li>Add the following code in the index.cshtml file. which implements the above step.<br /><pre class="csharp" name="code"><div id="divGreetings">@Ajax.ActionLink("Greet Me", "GreetMe", new AjaxOptions() { <br />                    UpdateTargetId="divGreetings",<br />                    HttpMethod="GET"<br />                })<br /></div></pre>This ActionLink method call just creates an Ajax action link with the text "Greet Me", upon clicking the link it invoke the "GreetMe" action method name which we already defined in the HomeController with the ajax option "HttpGetRequest" and update the Dom element with id "divGreetings" with the results that we are getting from the GreetMe action method, which is a simple string "Hello ASP.NET MVC3 Ajax!!"</li></ul><div class="separator" style="clear: both; text-align: center;"><a href="http://3.bp.blogspot.com/-X90DCHXAEQQ/TgWJkXaXijI/AAAAAAAAAHY/pKzrPDNWNF4/s1600/3-output.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" height="102" src="http://3.bp.blogspot.com/-X90DCHXAEQQ/TgWJkXaXijI/AAAAAAAAAHY/pKzrPDNWNF4/s320/3-output.PNG" width="320" /></a></div><a href="https://ch1blogs/blogs/211239/files/2011/06/3-output.PNG" title="3-output.PNG"><br /></a><br /><br /><b>Summary</b><br /><br />In this blog post we have implemented a basic ajax feature using Ajax.ActionLink helper method. In the next blog of the series we would see how to add some add interative animation during the ajax request.</div></div>
<h2>Comments</h2>
<div class='comments'>
<div class='comment'>
<div class='author'>Jyothish Abraham</div>
<div class='content'>
If i use LoadingElementID=&quot;divID&quot; then it shows loading div but the server call wont happen</div>
</div>
</div>
