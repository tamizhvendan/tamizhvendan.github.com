---
layout: post
title: "Ajax Update master page from content Page"
date: 2011-02-23
comments: false
categories:
 - ASP.NET
---

<div class='post'>
<div dir="ltr" style="text-align: left;" trbidi="on">Hi,<br />In this blog post we are going to see how can we update the master page from content page using ajax updatepanel in <a href="http://www.amazon.com/Beginning-ASP-NET-VB-Wrox-Programmer/dp/0470502215?ie=UTF8&amp;tag=bor0b-20&amp;link_code=btl&amp;camp=213689&amp;creative=392969" target="_blank">ASP.NET</a><img alt="" border="0" height="1px" src="http://www.assoc-amazon.com/e/ir?t=bor0b-20&amp;l=btl&amp;camp=213689&amp;creative=392969&amp;o=1&amp;a=0470502215" style="border-bottom: medium none; border-left: medium none; border-right: medium none; border-top: medium none; margin: 0px; padding-bottom: 0px! important; padding-left: 0px! important; padding-right: 0px! important; padding-top: 0px! important;" width="1px" />.<br />The sample website we are going to build will have a content page which allows to change the header of the website(which is present in master page). <br /><img height="169px" src="http://codeasp.net/Assets/Uploaded-CMS-Files/c15554a1-7e4e-498b-9c5e-a1365cf4643aAjaxifyMasterPage1.PNG" width="358px" /><br /><img height="143px" src="http://codeasp.net/Assets/Uploaded-CMS-Files/8feb0ea9-adf4-4bc6-99ae-4c9b28ed1cc1AjaxifyMasterPage2.PNG" width="334px" /><br />The tasks involved in creating this website are as follows:<br />1. Create an updatepanel in masterpage which holds the website header.<br />2. Create a method in MasterPage codebehind which changes the website header.<br />3. Create the content page with master page reference and an update panel which holds controls to triggers the header change.<br />4. Call the MasterPage method from content page.<br /><strong>1. Create an updatepanel in masterpage which holds the website header.</strong><br /><pre class="html" name="code">&lt;div class="title"&gt;<br />&lt;h1&gt;<br />&lt;asp:UpdatePanel ID="UpdatePanelWebsiteHeader" runat="server"<br />ChildrenAsTriggers="false" UpdateMode="Conditional"&gt;<br />&lt;ContentTemplate&gt;<br />&lt;asp:Label ID="lblWebsiteHeader" runat="server" Text="Label"&gt;<br />My ASP.NET Application<br />&lt;/asp:Label&gt;<br />&lt;/ContentTemplate&gt;<br />&lt;/asp:UpdatePanel&gt;                    <br />&lt;/h1&gt;<br />&lt;/div&gt;</pre><br />Make Sure the two properties of UpdatePanel <strong>"ChildrenAsTriggers"</strong> is set to false and <strong>"UpdateMode"</strong> is set to conditional, to prevent the unneccessary updation of updatepanel from its child controls. <br /><strong>2. Create a method in MasterPage codebehind which changes the website header.</strong><br /><br /><pre class="csharp" name="code">public void ChangeWebsiteHeader(string newHeader)<br />{<br />lblWebsiteHeader.Text = newHeader;<br />/* Calling the Update method of UpdatePanel will trigger <br />the updation of the Updatepanel */<br />UpdatePanelWebsiteHeader.Update();<br />}<br /></pre><br /><strong>3. Create the content page with master page reference and an update panel which holds controls to triggers the header change.</strong><br /><pre class="html" name="code">&lt;%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"<br />CodeFile="Default.aspx.cs" Inherits="_Default" %&gt;<br />&lt;%@ MasterType VirtualPath="~/Site.master" %&gt;</pre><pre class="html" name="code">&lt;asp:UpdatePanel ID="UpdatePanelChangeHeader" runat="server" UpdateMode="Conditional"&gt;<br />&lt;ContentTemplate&gt;<br />&lt;p&gt;<br />Enter the Website Header: &lt;asp:TextBox ID="txtHeader" runat="server" /&gt;<br />&lt;/p&gt;<br />&lt;asp:Button ID="btnChangeHeader" runat="server" Text="Change Header" <br />onclick="btnChangeHeader_Click" /&gt;<br />&lt;/ContentTemplate&gt;<br />&lt;/asp:UpdatePanel&gt; </pre><br /><strong>4. Call the MasterPage method from content page.</strong><br /><pre class="csharp" name="code">protected void btnChangeHeader_Click(object sender, EventArgs e)<br />{<br />Master.ChangeWebsiteHeader(Server.HtmlEncode(txtHeader.Text));<br />}</pre><br /><strong>Summary:</strong><br />In this blog we have seen how can we update the master page from the content page using ajax update panel. You can download the source code from <a href="http://www.box.net/shared/gpa9dlo668">here</a><br /><br /><script language="JavaScript1.1" src="http://bdv.bidvertiser.com/BidVertiser.dbm?pid=378794%26bid=938479" type="text/javascript"></script><br /><noscript></noscript></div></div>
